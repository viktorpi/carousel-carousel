"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,i){for(var t=0;t<i.length;t++){var s=i[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(i,t,s){return t&&e(i.prototype,t),s&&e(i,s),i}}();function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var Div=function(){function e(i){_classCallCheck(this,e),this.class=i}return _createClass(e,[{key:"render",value:function(){var e=document.createElement("div");return e.classList.add(this.class),e}}]),e}(),BulletItem=function(){function e(i,t){_classCallCheck(this,e),this.carousel=i,this.number=t;var s=document.createElement("li");s.classList.add("progress-bullet"),0===this.number&&s.classList.add("active");var l=document.createElement("a");l.setAttribute("href","#"),l.setAttribute("data-slide",this.number),l.addEventListener("click",this.carousel.showSlide.bind(this.carousel,this.number)),s.appendChild(l),this.item=s}return _createClass(e,[{key:"render",value:function(){return this.item}},{key:"activate",value:function(){this.item.classList.add("active")}},{key:"deactivate",value:function(){this.item.classList.remove("active")}}]),e}(),Slide=function(){function e(i){_classCallCheck(this,e),this.slide=i}return _createClass(e,[{key:"checkAndRemoveClass",value:function(e){this.slide.classList.contains(e)&&this.slide.classList.remove(e)}},{key:"addNewClass",value:function(e){this.slide&&!1===this.slide.classList.contains(e)&&this.slide.classList.add(e)}}]),e}(),Carousel=function(){function e(i){_classCallCheck(this,e),this.element=i,this.slides=this.element.getElementsByClassName("carousel-slide"),this.modifiedSlides=[];var t=!0,s=!1,l=void 0;try{for(var d,r=this.slides[Symbol.iterator]();!(t=(d=r.next()).done);t=!0){var n=d.value;this.modifiedSlides.push(new Slide(n))}}catch(e){s=!0,l=e}finally{try{!t&&r.return&&r.return()}finally{if(s)throw l}}this.controls=this.element.getElementsByClassName("slide-control");var a=this.getDirectionControls(),o=a.nextButton,h=a.previousButton;this.nextButton=o,this.previousButton=h,this.addEventListener(this.nextButton,this.nextSlide),this.addEventListener(this.previousButton,this.prevSlide),this.bullets=[],this.currentActiveNumber=0}return _createClass(e,[{key:"addEventListener",value:function(e,i){e.addEventListener("click",i.bind(this))}},{key:"getDirectionControls",value:function(){var e=void 0,i=void 0,t=!0,s=!1,l=void 0;try{for(var d,r=this.controls[Symbol.iterator]();!(t=(d=r.next()).done);t=!0){var n=d.value;"next"===n.dataset.target&&(e=n),"previous"===n.dataset.target&&(n.setAttribute("disabled",!0),i=n)}}catch(e){s=!0,l=e}finally{try{!t&&r.return&&r.return()}finally{if(s)throw l}}return{nextButton:e,previousButton:i}}},{key:"activate",value:function(){this.initStyles(),this.addCarouselProgress(),this.element.style.visibility="visible"}},{key:"addCarouselProgress",value:function(){for(var e=new Div("progress-wrapper").render(),i=document.createElement("ul"),t=0;t<this.modifiedSlides.length;t++){var s=new BulletItem(this,t);i.appendChild(s.render()),this.bullets.push(s)}console.log(this.bullets);var l=this.previousButton.cloneNode(!0),d=this.nextButton.cloneNode(!0);this.addEventListener(l,this.prevSlide),this.addEventListener(d,this.nextSlide),e.appendChild(l),e.appendChild(i),e.appendChild(d);var r=new Div("carousel-progress").render();r.appendChild(e),this.element.appendChild(r)}},{key:"initStyles",value:function(){for(var e=0;e<this.modifiedSlides.length;e++)this.modifiedSlides[e].addNewClass("slide"),1===e&&this.modifiedSlides[e].addNewClass("next"),e>0&&this.modifiedSlides[e].addNewClass("slide-right"),0===e&&this.modifiedSlides[e].addNewClass("active")}},{key:"nextSlide",value:function(){0===this.currentActiveNumber&&this.switchDisabled("previous",!1),this.currentActiveNumber!==this.modifiedSlides.length-1&&(this.switchActive(this.currentActiveNumber+1),this.currentActiveNumber++,this.currentActiveNumber===this.modifiedSlides.length-1&&this.switchDisabled("next",!0))}},{key:"prevSlide",value:function(){this.currentActiveNumber+1===this.modifiedSlides.length&&this.switchDisabled("next",!1),0!==this.currentActiveNumber&&(this.switchActive(this.currentActiveNumber-1),this.currentActiveNumber--),0===this.currentActiveNumber&&this.switchDisabled("previous",!0)}},{key:"showSlide",value:function(e){e=parseInt(e),this.switchActive(e),e===this.modifiedSlides.length-1&&this.switchDisabled("next",!0),this.currentActiveNumber===this.modifiedSlides.length-1&&e<this.modifiedSlides.length-1&&this.switchDisabled("next",!1),0===e&&this.switchDisabled("previous",!0),0===this.currentActiveNumber&&e>0&&this.switchDisabled("previous",!1),this.currentActiveNumber=e}},{key:"switchActive",value:function(e){this.modifiedSlides[e].checkAndRemoveClass("slide-right"),this.modifiedSlides[e].checkAndRemoveClass("slide-left"),this.modifiedSlides[e].checkAndRemoveClass("next"),this.modifiedSlides[e].checkAndRemoveClass("previous"),this.modifiedSlides[e].addNewClass("active");for(var i=0;i<e;i++)this.modifiedSlides[i].addNewClass("slide-left"),this.modifiedSlides[i].checkAndRemoveClass("slide-right"),this.modifiedSlides[i].checkAndRemoveClass("active"),this.modifiedSlides[i].checkAndRemoveClass("previous"),this.modifiedSlides[i].checkAndRemoveClass("next");for(var t=e+1;t<this.modifiedSlides.length;t++)this.modifiedSlides[t].addNewClass("slide-right"),this.modifiedSlides[t].checkAndRemoveClass("slide-left"),this.modifiedSlides[t].checkAndRemoveClass("active"),this.modifiedSlides[t].checkAndRemoveClass("previous"),this.modifiedSlides[t].checkAndRemoveClass("next");this.modifiedSlides[e-1]&&this.modifiedSlides[e-1].addNewClass("previous"),this.modifiedSlides[e+1]&&this.modifiedSlides[e+1].addNewClass("next");var s=!0,l=!1,d=void 0;try{for(var r,n=this.bullets[Symbol.iterator]();!(s=(r=n.next()).done);s=!0){r.value.deactivate()}}catch(e){l=!0,d=e}finally{try{!s&&n.return&&n.return()}finally{if(l)throw d}}this.bullets[e].activate()}},{key:"switchDisabled",value:function(e,i){var t=!0,s=!1,l=void 0;try{for(var d,r=this.controls[Symbol.iterator]();!(t=(d=r.next()).done);t=!0){var n=d.value;n.dataset.target===e&&(n.disabled=i)}}catch(e){s=!0,l=e}finally{try{!t&&r.return&&r.return()}finally{if(s)throw l}}}}]),e}();exports.default=Carousel;